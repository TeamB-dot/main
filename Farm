if not getgenv then return end

getgenv().BlackAir = getgenv().BlackAir or {}
getgenv().BlackAir.AutoExec = getgenv().BlackAir.AutoExec or false

local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local TRASH_SCRIPT_LINK = "https://raw.githubusercontent.com/TeamB-dot/main/refs/heads/main/main"

local q = queue_on_teleport or queue_on_teleport_internal or (syn and syn.queue_on_teleport)

local function queueNextServer()
    if not q then return end

    q([[
        repeat task.wait() until game:IsLoaded()
        loadstring(game:HttpGet("]] .. TRASH_SCRIPT_LINK .. [[", true))()
    ]])
end

-- GUI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "BlackAir Auto Farm",
   LoadingTitle = "BlackAir Auto Farm",
   LoadingSubtitle = "Trashcan Automation",
})

local Tab = Window:CreateTab("Farm", 4483362458)

Tab:CreateToggle({
    Name = "AutoExec",
    CurrentValue = getgenv().BlackAir.AutoExec,
    Callback = function(val)
        getgenv().BlackAir.AutoExec = val
    end,
})

Tab:CreateButton({
    Name = "Start Trashcan Farm",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/TeamB-dot/main/refs/heads/main/main"))()
    end
})

Tab:CreateButton({
    Name = "Server Hop",
    Callback = function()
        if getgenv().BlackAir.AutoExec then
            queueNextServer()
        end
        TeleportService:Teleport(game.PlaceId)
    end
})
